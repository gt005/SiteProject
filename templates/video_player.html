{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{{ url_for( 'static', filename='css/style.css', v=1)}}">
<link rel="stylesheet" href="http://vjs.zencdn.net/5.15.1/video-js.css">
{% endblock %}

{% block title %}
  Video Player
{% endblock %}

{% block content %}
  <div class="video-window">
	<video width="53%" height="67%" controls="controls">
		<source src="{{ video_file.file_path }}" class="opened-video" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
	</video>
    <h1>
      {{ video_file.file_name  }}
    </h1>
    Creator: {{ video_file.username }}
	<p>{{ video_file.views }} views/{{ video_file.likes }} likes</p>
  	<div class='like'>
  		{% if like_button == 'liked' %}
	  		<i class="fa fa-heart-o" aria-hidden="true" style="font-size: 3ex;color: #4468AF;"> Liked!</i>
	  	{% else %}
	  		<a class='like-toggle' href="{{ url_for('video_player', video_file=video_file.id, like_button_pressed=True) }}" id='hidden'><i class="fa fa-heart-o" aria-hidden="true"> Tap to like!</i></a>
	  	{% endif %}
	</div>
	<br>
  	{% if session['role'] == 'admin' %}
  		<div class="dropdown" style="padding-bottom: 2ex; width: 25%;text-align: center;left: 35%">
		  <button style="background-color: #75c3f3;" class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <span style="font-size: 1.2em;color: #4D6FBB;"><i class="fa fa-trash" aria-hidden="true"></i></span>
		  </button>
		  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
		    <a class="dropdown-item" href="{{ url_for('video_player', command='delete_file', video_file=video_file.id) }}" style="color:red;">Удалить видео <i class="fa fa-trash" aria-hidden="true"></i></a>
		  </div>
		</div>
		
  	{% endif %}
  </div>
  <hr>
  <div class="other-videos">
  	<h2>
  		Other interesting videos:
  	</h2>
  	<div class="VideoContent">
	<ul class="listVideo">
	  {% for video in listOfVideos %}
	    <div class="listVideoElement">  
	      <li style="list-style-type: none;overflow: hidden;align-items:  center;">
	        <a href="{{ url_for('video_player', video_file=video.id)}}" class="video-content-element" style="text-align: center;">
	          	<video width="80%" height="100%" controls="controls" style="left: 10%;position: relative;">
			   		<source src="{{ video.file_path }}" class="opened-video" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
				</video>
	          	<p>{{ video.file_name }}<br>Creator: {{ video.username }}<br>Category: {{ video.category }}<br>{{ video.views }} views/{{ video.likes }} likes</p>
	        </a>
	      </li>
	    </div>
	  {% endfor %}
	</ul>
</div>
  </div>
{% endblock %}
